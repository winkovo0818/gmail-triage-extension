<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gmail Triage - Options</title>
    <style>
      :root { --bg: #0f172a; --fg: #e2e8f0; --muted: #94a3b8; --card: #111827; --accent: #2563eb; }
      html, body { margin: 0; padding: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background: var(--bg); color: var(--fg); }
      a { color: inherit; }
      .container { max-width: 1000px; margin: 0 auto; padding: 24px; }
      .header { display: flex; align-items: center; justify-content: space-between; gap: 16px; margin-bottom: 16px; }
      .title { font-size: 22px; font-weight: 700; }
      .row { display: flex; gap: 16px; align-items: flex-start; }
      .col { flex: 1; }
      .card { background: var(--card); border: 1px solid #1f2937; border-radius: 10px; padding: 16px; }
      .card h2 { margin: 0 0 12px; font-size: 16px; }
      .muted { color: var(--muted); font-size: 12px; }
      .list { display: flex; flex-direction: column; gap: 8px; }
      .item { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; border: 1px solid #253043; border-radius: 8px; background: #0b1220; }
      .item-title { font-weight: 600; }
      .btns { display: flex; gap: 8px; }
      button { background: #111827; color: var(--fg); border: 1px solid #334155; border-radius: 8px; padding: 8px 12px; cursor: pointer; }
      button.primary { background: var(--accent); border-color: var(--accent); }
      button.danger { border-color: #7f1d1d; background: #7f1d1d; }
      button:disabled { opacity: .6; cursor: not-allowed; }
      .grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 12px; }
      label { display: block; font-size: 12px; color: var(--muted); margin-bottom: 6px; }
      input, textarea, select { width: 100%; box-sizing: border-box; padding: 10px 12px; border-radius: 8px; border: 1px solid #334155; background: #0b1220; color: var(--fg); }
      textarea { min-height: 88px; font-family: ui-monospace, Menlo, Monaco, "Courier New", monospace; }
      .footer { display: flex; align-items: center; justify-content: space-between; margin-top: 12px; }
      .spacer { height: 8px; }
      .danger-zone { display: flex; gap: 8px; }
      .file { display: none; }
      .notice { color: #f59e0b; font-size: 12px; }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <div>
          <div class="title">Gmail Triage - Profiles</div>
          <div class="muted">Manage API profiles used by the extension. Stored locally using chrome.storage.local.</div>
        </div>
        <div class="btns">
          <button id="exportBtn">Export</button>
          <label for="importFile" class="btn-label"><button id="importBtn">Import</button></label>
          <input id="importFile" class="file" type="file" accept="application/json" />
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="card">
            <h2>Saved Profiles</h2>
            <div id="profilesList" class="list"></div>
          </div>
        </div>
        <div class="col">
          <div class="card">
            <h2 id="formTitle">Create Profile</h2>
            <div class="grid">
              <div>
                <label for="base_url">Base URL</label>
                <input id="base_url" placeholder="https://api.example.com" />
              </div>
              <div>
                <label for="api_key">API Key</label>
                <input id="api_key" placeholder="sk-..." />
              </div>
              <div>
                <label for="model">Model</label>
                <input id="model" placeholder="gpt-4o-mini" />
              </div>
              <div>
                <label for="timeout">Timeout (ms)</label>
                <input id="timeout" type="number" min="0" placeholder="30000" />
              </div>
              <div>
                <label for="temperature">Temperature</label>
                <input id="temperature" type="number" min="0" step="0.1" placeholder="0.2" />
              </div>
              <div>
                <label for="max_tokens">Max Tokens</label>
                <input id="max_tokens" type="number" min="1" placeholder="1024" />
              </div>
              <div style="grid-column: span 2;">
                <label for="headers">Headers (JSON object)</label>
                <textarea id="headers" placeholder='{"X-Org": "acme"}'></textarea>
              </div>
            </div>
            <div class="spacer"></div>
            <div class="footer">
              <div class="notice" id="status"></div>
              <div class="btns">
                <button id="resetBtn">Reset</button>
                <button id="saveBtn" class="primary">Save</button>
              </div>
            </div>
          </div>

          <div class="spacer"></div>

          <div class="card">
            <h2>Danger Zone</h2>
            <div class="danger-zone">
              <button id="clearAllBtn" class="danger">Clear All Profiles</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="/src/options/main.ts"></script>
  </body>
</html>
